<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Transforming and Harmonizing CCHS Variables • cchsflow</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
<link rel="icon" sizes="any" href="favicon.ico">
<link rel="manifest" href="site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Transforming and Harmonizing CCHS Variables">
<meta property="og:description" content='Supporting the use of the Canadian Community Health Survey (CCHS) by transforming variables from each cycle into harmonized, consistent versions that span survey cycles (currently, 2001 to 2018). CCHS data used in this library is accessed and adapted in accordance to the Statistics Canada Open Licence Agreement. This package uses rec_with_table(), which was developed from sjmisc rec(). Lüdecke D (2018). "sjmisc: Data and Variable Transformation Functions". Journal of Open Source Software, 3(26), 754. &lt;doi:10.21105/joss.00754&gt;.'>
<meta property="og:image" content="https://big-life-lab.github.io/cchsflow/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">cchsflow</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/get_started.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/variables_sheet.html">variables.csv sheet</a>
    </li>
    <li>
      <a href="articles/variable_details.html">variable_details.csv sheet</a>
    </li>
    <li>
      <a href="articles/derived_variables.html">Derived variables</a>
    </li>
    <li>
      <a href="articles/how_to_add_variables.html">How to add variables</a>
    </li>
    <li>
      <a href="articles/tagged_na_usage.html">How to use tagged_na</a>
    </li>
    <li>
      <a href="articles/duplicate_datasets.html">CCHS datasets that overlap each other</a>
    </li>
  </ul>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Big-Life-Lab/cchsflow/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>

    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="cchsflow-">cchsflow <img src="reference/figures/logo.svg" align="right" alt="" width="180"><a class="anchor" aria-label="anchor" href="#cchsflow-"></a>
</h1></div>
<!-- badges: start -->

<p><em>cchsflow</em> supports the use of the Canadian Community Health Survey (CCHS) by transforming variables from each cycle into harmonized, consistent versions that span survey cycles (currently, 2001 to 2018).</p>
<p>The CCHS is a population-based cross-sectional survey of Canadians that has been administered every two years since 2001. There are approximately 130,000 respondents per cycle. Studies use multiple CCHS cycles to examine trends over time and increase sample size to examine sub-groups that are too small to examine in a single cycle.</p>
<p>The CCHS is one of the largest and most robust ongoing population health surveys worldwide. The CCHS, administered by Statistics Canada, is Canada’s main general population health survey. Information about the survey is found <a href="https://www23.statcan.gc.ca/imdb/p2SV.pl?Function=getSurvey&amp;SDDS=3226" class="external-link">here</a>. The CCHS has a <a href="https://www.statcan.gc.ca/eng/reference/licence" class="external-link">Statistic Canada Open Licence</a>.</p>
<div class="section level2">
<h2 id="concept">Concept<a class="anchor" aria-label="anchor" href="#concept"></a>
</h2>
<p>Each cycle of the CCHS contains over 1000 variables that cover the four main topics: sociodemographic measures, health behaviours, health status and health care use. The <em>seemingly</em> consistent questions across CCHS cycles entice you to combine them together to increase sample size; however, you soon realize a challenge…</p>
<p>Imagine you want to use BMI (body mass index) for a study that spans CCHS 2001 to 2018. BMI <em>seems</em> like a straightforward measure that is routinely-collected worldwide. Indeed, BMI is included in all CCHS cycles. You examine the documentation and find the variable <code>HWTAGBMI</code> in the CCHS 2001 corresponds to body mass index, but that in other cycles, the variable name changes to <code>HWTCGBMI</code>, <code>HWTDGBMI</code>, <code>HWTEGBMI</code>, etc. On reading the documentation, you notice that some cycles round the value to one decimal, whereas other cycles round to two digits. Furthermore, some cycles don’t calculate BMI for respondents &lt; age 20 or &gt; 64 years. Also, some cycles calculate BMI only if height and weight are within specific ranges. These types of changes occur for almost all CCHS variables. Sometimes the changes are subtle and difficult to find in the documentation, even for seemingly straightforward variables such as BMI. <code>cchsflow</code> harmonizes the BMI variable across different cycles.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p><code>cchsflow</code> creates harmonized variables (where possible) between CCHS cycles. Searching BMI in <code>variables</code> (described in the Introduction section of variableDetails.csv <a href="https://big-life-lab.github.io/cchsflow/articles/variable_details.html">vignette</a>) shows <code>HWTGBMI</code> calculates BMI with two decimal places for all cycles for all respondents using the respondents’ untruncated height and weight.</p>
<p><em>Calculate a harmonized BMI variable for CCHS 2001 cycle</em></p>
<pre><code><span>    <span class="co"># load test cchs data - included in cchsflow</span></span>
<span></span>
<span>    <span class="va">cchs2001_BMI</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="st">"HWTGBMI"</span><span class="op">)</span></span>
<span>    </span></code></pre>
<p>Notes printed to console indicate issues that may affect BMI classification for your study.</p>
<pre><code>Loading cchsflow variable_details
Using the passed data variable name as database_name
NOTE for HWTGBMI : CCHS 2001 restricts BMI to ages 20-64
NOTE for HWTGBMI : CCHS 2001 and 2003 codes not applicable and missing
variables as 999.6 and 999.7-999.9 respectively, while CCHS 2005 onwards codes
not applicable and missing variables as 999.96 and 999.7-999.99 respectively
NOTE for HWTGBMI : Don't know (999.7) and refusal (999.8) not included
in 2001 CCHS"</code></pre>
</div>
<div class="section level2">
<h2 id="important-notes">Important notes<a class="anchor" aria-label="anchor" href="#important-notes"></a>
</h2>
<p><em>Combining CCHS across survey cycles will result in misclassification error and other forms of bias that affects studies in different ways.</em> The transformations that are described in this repository have been used in several research projects, but there are no guarantees regarding the accuracy or appropriate uses. <a href="https://www150.statcan.gc.ca/n1/en/pub/82-003-x/82-003-x2009001-eng.pdf?st=_n9lb9N4" class="external-link">Thomas and Wannell</a> describe methodolgy issues when combining CCHS cycles.</p>
<p>Care must be taken to understand how specific variable transformation and harmonization with <code>cchsflow</code> affect your study or use of CCHS data. Across survey cycles, almost all CCHS variables have had at least some change in wording and category responses. Furthermore, there have been changes in survey sampling, response rates, weighting methods and other survey design changes that affect responses.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<pre><code><span>    <span class="co"># Install release version from CRAN</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"cchsflow"</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># Install the most recent version from GitHub</span></span>
<span>    <span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"Big-Life-Lab/cchsflow"</span><span class="op">)</span></span></code></pre>
<div class="section level4">
<h4 id="new-variables-not-yet-added-to-the-cran-version">New variables not yet added to the CRAN version<a class="anchor" aria-label="anchor" href="#new-variables-not-yet-added-to-the-cran-version"></a>
</h4>
<p>You can download and use the latest version of <a href="https://github.com/Big-Life-Lab/cchsflow/blob/master/inst/extdata/variables.csv" class="external-link"><code>variables.csv</code></a> and <a href="https://github.com/Big-Life-Lab/cchsflow/blob/master/inst/extdata/variable_details.csv" class="external-link"><code>variable_details.csv</code></a> from GitHub.</p>
</div>
</div>
<div class="section level2">
<h2 id="what-is-in-the-cchsflow-package">What is in the <code>cchsflow</code> package?<a class="anchor" aria-label="anchor" href="#what-is-in-the-cchsflow-package"></a>
</h2>
<p><em>cchsflow</em> package includes:</p>
<ol style="list-style-type: decimal">
<li>
<code>variables.csv</code> - a list of variables that can be transformed across CCHS surveys.<br>
</li>
<li>
<code>variable_details.csv</code> - information that describes how the variables are recoded.</li>
<li>Vignettes - that describe how to use R to transform or generate new derived variables that are listed in <code>variables.csv</code>. Transformations are performed using <code><a href="reference/rec_with_table.html">rec_with_table()</a></code>. <code>variables.csv</code> and <code>variable_details.csv</code> can be used with other statistics programs (see <a href="https://github.com/Big-Life-Lab/cchsflow/issues" class="external-link">issue</a>).</li>
<li>Demonstration CCHS data - <code>cchsflow</code> includes a random sample of 200 respondents from each CCHS PUMF file from 2001 to 2018. These data are used for the vignettes. The CCHS test data is stored in /data as .RData files. They can be read as a package database.</li>
</ol>
<pre><code><span><span class="co"># read the CCHS 2017-2018 PUMF test data</span></span>
<span></span>
<span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="va">cchs2017_2018_p</span></span></code></pre>
<p>This repository does not include the full CCHS data. Information on how to access the CCHS data can is <a href="https://www150.statcan.gc.ca/n1/pub/82-620-m/2005001/4144189-eng.htm" class="external-link">here</a>. The Canadian university community can also access the CCHS through <a href="http://odesi2.scholarsportal.info/webview/" class="external-link">ODESI</a> (see health/Canada/Canadian Community Health Survey).</p>
<div class="section level3">
<h3 id="roadmap">Roadmap<a class="anchor" aria-label="anchor" href="#roadmap"></a>
</h3>
<p>Project on the roadmap can be found on <a href="https://github.com/Big-Life-Lab/cchsflow/projects" class="external-link">here</a>.</p>
</div>
</div>
<div class="section level2">
<h2 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h2>
<p>Please follow <a href="https://big-life-lab.github.io/cchsflow/CONTRIBUTING.html">this guide</a> if you would like to contribute to the <em>cchsflow</em> package.</p>
<p>We encourage PRs for additional variable transformations and derived variables that you believe may be helpful to the broad CCHS community.</p>
<p>Currently, <em>cchsflow</em> supports R through the <code><a href="reference/rec_with_table.html">rec_with_table()</a></code> function. The CCHS community commonly uses SAS, Stata and other statistical packages. Please feel free to contribute to <code>cchsflow</code> by making a PR that creates versions of <code><a href="reference/rec_with_table.html">rec_with_table()</a></code> for other statistical and programming languages.</p>
</div>
<div class="section level2">
<h2 id="statistics-canada-attribution">Statistics Canada Attribution<a class="anchor" aria-label="anchor" href="#statistics-canada-attribution"></a>
</h2>
<p>CCHS data used in this library is accessed and adapted in accordance to the Statistics Canada Open Licence Agreement.</p>
<p>Source from Statistics Canada, Canadian Community Health Survey 2001 to 2018 PUMF, accessed March 2022. Reproduced and distributed on an “as is” basis with the permission of Statistics Canada.</p>
<p>Adapted from Statistics Canada, Canadian Community Health Surveys 2001 to 2018 PUMF, accessed March 2022. This does not constitute an endorsement by Statistics Canada of this product.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=cchsflow" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/Big-Life-Lab/cchsflow/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Big-Life-Lab/cchsflow/issues" class="external-link">Report a bug</a></li>
<li><a href="https://www.projectbiglife.ca" class="external-link">Calculators</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing cchsflow</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Doug Manuel <br><small class="roles"> Author, copyright holder </small> <a href="https://orcid.org/0000-0003-0912-0845" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Warsame Yusuf <br><small class="roles"> Author </small>   </li>
<li>Rostyslav Vyuha <br><small class="roles"> Author </small>   </li>
<li>Kitty Chen <br><small class="roles"> Author, maintainer </small>   </li>
<li>Carol Bennett <br><small class="roles"> Author </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Doug Manuel, Warsame Yusuf, Rostyslav Vyuha, Kitty Chen, Carol Bennett.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({


    apiKey: 'a674c1edc7b44c4ee995ef4227708c57',
    indexName: 'cchsflow',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
