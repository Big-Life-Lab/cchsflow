<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Using cchsflow • cchsflow</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Using cchsflow">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cchsflow</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Worksheets
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/usingcchsflow.html">Using cchsflow</a>
    </li>
    <li>
      <a href="../articles/variablesSheet.html">variables.csv sheet</a>
    </li>
    <li>
      <a href="../articles/variableDetails.html">variableDetails.csv sheet</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Big-Life-Lab/cchsflow">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="usingcchsflow_files/htmlwidgets-1.3/htmlwidgets.js"></script><script src="usingcchsflow_files/jquery-1.12.4/jquery.min.js"></script><link href="usingcchsflow_files/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">
<script src="usingcchsflow_files/datatables-binding-0.7/datatables.js"></script><link href="usingcchsflow_files/dt-core-1.10.16/css/jquery.dataTables.min.css" rel="stylesheet">
<link href="usingcchsflow_files/dt-core-1.10.16/css/jquery.dataTables.extra.css" rel="stylesheet">
<script src="usingcchsflow_files/dt-core-1.10.16/js/jquery.dataTables.min.js"></script><link href="usingcchsflow_files/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet">
<script src="usingcchsflow_files/crosstalk-1.0.0/js/crosstalk.min.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Using cchsflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Big-Life-Lab/cchsflow/blob/master/vignettes/usingcchsflow.Rmd"><code>vignettes/usingcchsflow.Rmd</code></a></small>
      <div class="hidden name"><code>usingcchsflow.Rmd</code></div>

    </div>

    
    
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting Started</h2>
<div id="loading-the-necessary-packages" class="section level3">
<h3 class="hasAnchor">
<a href="#loading-the-necessary-packages" class="anchor"></a>Loading the necessary packages</h3>
<p>The <code>RecWTable</code> and <code>SetDataLabels</code> functions are part of the <a href="https://bllflow.projectbiglife.ca/index.html">bllflow</a> package. <code>RecWTable</code> is used to transform CCHS variables to a common name, while <code>SetDataLabels</code> reapplies labels that are lost during the combination process after transforming each CCHS dataset. You must install &amp; load the package onto your environment in order to do any transformations. Since <code>bllflow</code> is still under development and is not on CRAN, you must install the package from Github using the <code>devtools</code> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"devtools"</span>)
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(devtools)
<span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"Big-Life-Lab/bllflow"</span>, <span class="dt">ref =</span> <span class="st">"recode-with-table-patch"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(bllflow)</code></pre></div>
<p>To be able to combine datasets with minimal issues, we recommend using the <code>bind_rows</code> function in the <a href="https://www.rdocumentation.org/packages/dplyr/versions/0.7.8">dplyr</a> package.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(dplyr)</code></pre></div>
<p>For this vignette, we will use the <code>datatable</code> function in the <a href="https://rstudio.github.io/DT/">DT</a> package to provide data tables to illustrate the transformations.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(DT)</code></pre></div>
</div>
</div>
<div id="steps" class="section level2">
<h2 class="hasAnchor">
<a href="#steps" class="anchor"></a>Steps</h2>
<div id="step-1--load-the-cchs-datasets-variables-csv-and-variabledetails-csv" class="section level3">
<h3 class="hasAnchor">
<a href="#step-1--load-the-cchs-datasets-variables-csv-and-variabledetails-csv" class="anchor"></a>Step 1. Load the CCHS datasets, variables.csv, and variableDetails.csv</h3>
<p>You will need to load the CCHS datasets as well as the two variable worksheets before you are able to do any transformations. Since CCHS datasets cannot be shared publicly, we will create mock CCHS datasets for the years 2001 and 2013 which will be used in examples later on.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">varSheet &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>(), <span class="st">'../inst/extdata/variables.csv'</span>))
varDetails &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/getwd.html">getwd</a></span>(), <span class="st">'../inst/extdata/variableDetails.csv'</span>))
cchsMock2001 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">DHHA_SEX =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">6</span>), <span class="dt">DHHAGAGE =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">6</span>), <span class="dt">FVCADTOT =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">12</span>, <span class="dv">4</span>, <span class="dv">20</span>, <span class="dv">9</span>))
cchsMock2013 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">DHH_SEX =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>), <span class="dt">DHHGAGE =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>), <span class="dt">FVCDTOT =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">25</span>, <span class="dv">15</span>, <span class="dv">6</span>))</code></pre></div>
<p>Did you notice that the names for the variables are slightly different in the two mock databases? That isn’t a mistake: in the 2001 CCHS the variable for sex is <code>DHHA_SEX</code> and in 2013 CCHS the variable is <code>DHH_SEX</code>.</p>
<p>Don’t worry, <code>cchsflow</code> is here to help! <code>variableDetails.csv</code> contains the rules to harmonize those two variables into a common variable name. In the CCHS, the categories for <code>sex</code> are consistient: 1 = males, 2 = females. If the category values or labels changed, <code>variableDetails.csv</code> would provide instructions for how to harmonize them. You can learn more about these in later vignettes.</p>
<div id="htmlwidget-f4eb78d7cb076c43044f" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-f4eb78d7cb076c43044f">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119"],["ADL_01","ADL_02","ADL_03","ADL_04","ADL_05","ADL_06","ADLF6R","ALC_1","ALCDTTM","ALCDTYP","ALW_1","ALWDDLY","ALWDWKY","CCC_031","CCC_051","CCC_071","CCC_091","CCC_101","CCC_111","CCC_121","CCC_131","CCC_151","CCC_171","CCC_251","CCC_280","CCC_91E","CCC_91F","DHH_OWN","DHH_SEX","DHHGAGE_A","DHHGAGE_B","DHHGAGE_cont","DHHGMS","EDUDR04","FINF1","FSCDHFS","FSCDHFS2","FVCDCAR","FVCDFRU","FVCDJUI","FVCDPOT","FVCDSAL","FVCDTOT","FVCDVEG","GEN_01","GEN_02A","GEN_02A2","GEN_02B","GEN_07","GEN_09","GEN_10","GEOGPRV","HUIDCOG","HUIDEMO","HUIDHSI","HUIGDEX","HUIGHER","HUIGMOB","HUIGSPE","HUIGVIS","HUPDPAD","HWTGBMI","INCDRCA","INCDRPR","INCDRRS","INCGPER","MED_1P","PAC_4A","PAC_4B","PAC_7","PAC_7A","PAC_7B","PAC_8","PAC_8A","PAC_8B","PACDEE","RAC_1","RAC_2A","RAC_2B1","RAC_2B2","RAC_2C","RACAG5","RACDIMP","RACDPAL","RACG5","SDCFIMM","SDCGCBG ","SDCGCGT","SDCGRES ","SLP_02","SLP_02_A","SLP_03","SLP_03_A","SLP_04","SLP_04_A","SLPG01","SLPG01_A","SLPG01_cont","SMK_01A","SMK_05B","SMK_05D","SMK_06A_A","SMK_06A_B","SMK_06A_cont","SMK_09A_A","SMK_09A_B","SMK_09A_cont","SMK_204","SMK_208","SMKDSTY","SMKG01C_A","SMKG01C_B","SMKG01C_cont","SMKG203_A","SMKG203_B","SMKG203_cont","SMKG207_A","SMKG207_B","SMKG207_cont"],["Help preparing meals","Help appointments/errands","Help housework","Help personal care","Help move inside house","Help personal finances","Help tasks","Alcohol past year","Drinker type 12M","Drinker type","Any alcohol past week","Average daily consumption","Drinks last week","Asthma","Arthritis/Rheumatism","Hypertension","COPD/Emphysema","Diabetes","Epilepsy","Heart Disease","Active Cancer","Stroke","Bowel disorder","Chronic fatigue","Mood disorder","Emphysema","COPD","Home ownership","Sex","Age","Age","Age","Marital status","Highest education","Food insecurity 12M","Food security","HC food security","Carrot consumption","Fruit consumption","Juice consumption","Potato consumption","Salad consumption","Total fruit/veg consumption","Other veg consumption","Self perceived health","Life satisfaction_cat","Life satisfaction_cont","Self-perceived mental health","Self-perceived life stress","Self-perceived work stress","Sense of belonging ","Province","HUI Cognition","HUI Emotion","Overall HUI","HUI Dexterity","HUI Hearing","HUI Mobility","HUI Speech","HUI Vision","HUI Pain","BMI","Household income distribution","Household income distribution provincial level","Household income distribution health region level","Personal Income","Sleeping pills","Time walk work/school in week","Time bike work/school in week","Walk to work/school","Number times walk work/school","Time walk work/school","Bike to work/school","Number times bike work/school","Time bike work/school","Physical activity","Difficulty activities","Reduction activities at home","Reduction activities at school","Reduction activities at work","Reduction other activities","Cause health problem","Impact health problem","Particpation/activity limitation","Cause health problem","Immigrant status","Country of birth","Ethnicity","Time in Canada","Trouble sleeping","Trouble sleeping","Sleep refreshing","Sleep refreshing","Difficulty awake","Difficulty awake","Hours sleep","Hours sleep","Hours sleep","s100","cigdayo","evd","stpn","stpn","stpn","stpo","stpo","stpo","cigdayd","cigdayf","Smoking status","agec1 ","agec1 ","agec1","agecigo","agecigo","agecigo","agecigd","agecigd","agecigd"],["Needs help - preparing meals","Needs help - getting to appointments/errands","Needs help - doing housework","Needs help - personal care","Needs help - moving about inside house","Needs help - looking after finances","Needs help with at least one task - (F)","Past year, have you drank alcohol","Type of drinker (12 months)","Type of drinker - (D)","Past week, had any alcohol","Average daily alcohol consumption","Weekly consumption of alcohol","Do you have asthma?","Do you have arthritis or rheumatism?","Do you have high blood pressure","Do you have COPD (eg bronchitis, emphysema)","Do you have diabetes","Do you have epilepsy?","Do you have heart disease","Do you have cancer","Do you suffer from effects of stroke","Do you have a bowel disorder such as Crohn's disease or colitis?","Do you have chronic fatigue syndrome?","Do you have a mood disorder","Do you have emphysema?","Do you have COPD?","Dwelling - owned by a member of hsld","Sex","Age","Age","Converted categorical age","Marital status - (G)","Highest level/education","Some food insecurity in past 12 months","Household food security status - (D)","Household food security status - (HC)","Daily consumption - carrots (D)","Daily consumption - fruit - (D)","Daily consumption - fruit juice (D)","Daily consumption - potatoes (D)","Daily consumption - green salad - (D)","Daily consumptoin - total fruits and veg. - (D)","Daily consumption other vegetables - (D)","Self perceived health","Satisfaction with life","Satisfaction with life in general","Self-perceived mental health","Self perceived life stress","Self perceived work stress","Sense of belonging in the community","Province of residence of respondent (G)","Cognition prob. - function code - (D)","Emotional problems - function code - (D)","Health Utility Index (HUI3) - (D)","Dexterity trouble - function code (D, G)","Hearing problems - function code (D, G)","Mobility trouble - function code (D, G)","Speech trouble - function code - (D, G)","Vision trouble - function code - (D, G)","Act. prevent/pain - function code - (D)","BMI / self-report - (D,G)","Household income distribution - (D)","Hhld inc. distribution-prov. level - (D)","Hhld inc. distribution- hr level - (D)","Total pers. inc. from all sources (D, G)","In the past month, did you take sleeping pills","In a typical week in the past 3 months, how many hours did you usually spend walking to work or to school or while doing errands","In a typical week in the past 3 months, how many hours did you usually spend walking to work or to school or while doing errands","Walked to work or school / last 3 mo.","No. of times/3 mo./walking work/school","Time spent - walking to go work/school","Bicycled to work or school / last 3 mo.","No. of times/3 mo./bicycl. work/school","Time spent - walking to go work/school","Daily energy expenditure - (D)","Has difficulty with activities","Reduction - activities at home","Long-term cond. reduces act. - school","Reduction kind/amount act. - at work","Reduction - other activities","Cause of Health problem","Impact of health problems","Participation and activity limitation","Cause of Health problem","Immigrant Status (D)","Country of birth - (G)","Cultural or racial origin - (D, G)","Length/time in Canada since imm. (D, G)","Freq. - trouble sleeping","Freq. - trouble sleeping","Freq. - find sleep refreshing","Freq. - find sleep refreshing","Freq. - diffficult to stay awake","Freq. - diffficult to stay awake","No./hours spent sleeping each night","No./hours spent sleeping each night","No./hours spent sleeping each night","In lifetime, smoked 100 or more cigarettes","# of cigarettes smoked daily - occasional smoker","Ever smoked cigarettes daily - occasional smoker","When did you stop smoking daily - occasional","When did you stop smoking daily - occasional","When did you stop smoking daily - occasional","When did you stop smoking daily - occasional","When did you stop smoking daily - occasional","When did you stop smoking daily - occasional","# of cigarettes smoked daily - daily smoker","# of cigarettes smoke each day - former daily","Type of smoker","Age smoked first cigarette","Age smoked first cigarette","Age smoked first cigarette","Age started to smoke daily - occasional smoker (G)","Age started to smoke daily - occasional smoker (G)","Age started to smoke daily - occasional smoker (G)","Age started to smoke daily","Age started to smoke daily","Age started to smoke daily"],["health behaviour","health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","chronic disease","Sociodemographic","demographic","demographic","demographic","demographic","Sociodemographic","Sociodemographic","Sociodemographic","Sociodemographic","Sociodemographic","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","Demographics","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","health behaviour","Sociodemographic","Sociodemographic","Sociodemographic","Sociodemographic","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Sociodemographic","Sociodemographic","Sociodemographic","Sociodemographic","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","Health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour","health behaviour"],["Assistance/Difficulty","Assistance/Difficulty","Assistance/Difficulty","Assistance/Difficulty","Assistance/Difficulty","Assistance/Difficulty","Assistance/Difficulty","Alcohol","Alcohol","Alcohol","Alcohol","Alcohol","Alcohol","Asthma","Arthritis/Rheumatism","Hypertension","COPD/emphysema","Diabetes","Epilepsy","Heart Disease","Cancer","Stroke","Bowel disorder","Chronic fatigue syndrome","Mood disorder","Emphysema","COPD","Home ownership","Sex","Age","Age","Age","Marital Status","Education","Food security","Food security","Food security","Fruits/vegetables","Fruits/vegetables","Fruits/vegetables","Fruits/vegetables","Fruits/vegetables","Fruits/vegetables","Fruits/vegetables","Self-perceived health","Satisfaction with life","Satisfaction with life","Mental health","Mental health","Mental health","Mental health","Province","Health utility index","Health utility index","Health utility index","Health utility index","Health utility index","Health utility index","Health utility index","Health utility index","Health utility index","BMI","Income","Income","Income","Income","Sleep","Exercise","Exercise","Exercise","Exercise","Exercise","Exercise","Exercise","Exercise","Exercise","Assistance/Difficulty","Assistance/Difficulty","Assistance/Difficulty","Assistance/Difficulty","Assistance/Difficulty","Health problems","Health problems","Health problems","Health problems","Migration","Migration","Ethnicity","Migration","Sleep","Sleep","Sleep","Sleep","Sleep","Sleep","Sleep","Sleep","Sleep","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking","Smoking"],["Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Continuous","Continuous","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Continuous","Categorical","Categorical","Categorical","Categorical","Categorical","Continuous","Continuous","Continuous","Continuous","Continuous","Continuous","Continuous","Categorical","Categorical","Continuous","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Continuous","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Continuous","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Continuous","Categorical","Categorical","Continuous","Categorical","Continuous","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Categorical","Continuous","Categorical","Continuous","Categorical","Categorical","Categorical","Continuous","Categorical","Categorical","Continuous","Continuous","Continuous","Categorical","Categorical","Categorical","Continuous","Categorical","Categorical","Continuous","Categorical","Categorical","Continuous"],["N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","drinks/day","drinks/week","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","Years","Years","Years","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","kg/m2","N/A","N/A","N/A","N/A","N/A","hours/week","hours/week","N/A","N/A","mins","N/A","times/3 mos.","N/A","METS","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","N/A","cigarettes","N/A","Years","Years","Years","Years","Years","Years","cigarettes","cigarettes","N/A","Years","Years","Years","Years","Years","Years","Years","Years","Years"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>variable<\/th>\n      <th>label<\/th>\n      <th>labelLong<\/th>\n      <th>section<\/th>\n      <th>subject<\/th>\n      <th>variableType<\/th>\n      <th>units<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"order":[],"autoWidth":false,"orderClasses":false,"columnDefs":[{"orderable":false,"targets":0}]}},"evals":[],"jsHooks":[]}</script><pre><code>## As you can see in variables.csv, there are 119 variables that can be transformed that are divided into 6 sections, and 36 subjects.</code></pre>
</div>
<div id="step-2--transform-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#step-2--transform-variables" class="anchor"></a>Step 2. Transform variables</h3>
<p>To call the <code><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable()</a></code> function to transform the variables of a CCHS dataset:</p>
<ol style="list-style-type: decimal">
<li>Create a name for your transformed dataset (e.g. cchsYear1)</li>
<li>Indicate the database of the CCHS dataset in the <code>dataSource</code> argument</li>
<li>Indicate the name of <code>variableDetails.csv</code> in the <code>variableDetails</code> argument</li>
<li>Indicate the full name of the CCHS dataset (this can be found in the data documentation of the CCHS dataset) in the <code>datasetName</code> argument.</li>
</ol>
<p>Your R command when calling the function should look like this:</p>
<p><code>cchsTransformedYear1 &lt;- RecWTable(dataSource = cchsYear, variableDetails = varDetails, datasetName = "cchs-Year1-general-file")</code></p>
</div>
<div id="default-arguments" class="section level3">
<h3 class="hasAnchor">
<a href="#default-arguments" class="anchor"></a>Default arguments</h3>
<p>With <code><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable()</a></code> there are also default arguments that do not need to be called unless you would like to modify them.</p>
<ul>
<li>
<code>elseValue</code> is set to NA. Else values (values out of range) will be set to NA.</li>
<li>
<code>appendToData</code> is set to FALSE. Transformed variables will not be appended to the original CCHS dataset.</li>
<li>
<code>log</code> is set to FALSE. Logs of the variable tranformations will not be displayed.</li>
<li>
<code>printNote</code> is set to TRUE. Any information in the Notes column from <code>variableDetails.csv</code> will be displayed</li>
<li>
<code>variables</code> is set to NULL. This argument can be used to add labels to the transformed dataset by setting it to the name of <code>variables.csv</code> or by specifying particular variables from <code>variables.csv</code> to transform.</li>
<li>
<code>varLabels</code> is set to NULL. This argument can be used to add labels to a transformed dataset that only contains a subset of variables from <code>variables.csv</code>. The format to add labels to a subset of variables is <code><a href="https://rdrr.io/r/base/c.html">c(variable = "Label")</a></code>.</li>
</ul>
<p>See the <code><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">bllflow::RecWTable()</a></code> <a href="http://bllflow.projectbiglife.ca">documentation</a> for more details about how to use RecWTable().</p>
</div>
<div id="example-1--transform-a-single-variable-from-a-single-database" class="section level3">
<h3 class="hasAnchor">
<a href="#example-1--transform-a-single-variable-from-a-single-database" class="anchor"></a>Example 1. Transform a single variable from a single database</h3>
<p>In this example, the sex variable in the 2001 CCHS cycle is transformed.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex2001 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2001, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2001-c1-1-general-file"</span>, <span class="dt">log =</span> <span class="ot">TRUE</span>, <span class="dt">variables =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DHH_SEX"</span>))</code></pre></div>
<pre><code>## [1] "The variable DHHA_SEX was recoded into DHH_SEX for the database cchs-82M0013-E-2001-c1-1-general-file the following recodes were made:"
##   valueTo From rowsRecoded
## 1       1    1           2
## 2       2    2           1
## 3   NA::a    6           1
## 4   NA::b  7:9           0</code></pre>
<div id="htmlwidget-7942da778f1589fc1081" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-7942da778f1589fc1081">{"x":{"filter":"none","data":[["1","2","3","4"],["2","1","1","NA(a)"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHH_SEX<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="combine-transformed-datasets-into-a-single-dataset" class="section level3">
<h3 class="hasAnchor">
<a href="#combine-transformed-datasets-into-a-single-dataset" class="anchor"></a>Combine transformed datasets into a single dataset</h3>
<p>Use the <code>bind_rows</code> function to combine datasets and create a new dataset name. NOTE: <code>bind_rows</code> along with other R functions will likely remove labels in your newly combined dataset. Step 4 explains how to add labels to your final dataset.</p>
<p><code>combinedCCHS &lt;- bind_rows(cchsTransformedYear1, cchsTransformedYear2, ...)</code></p>
</div>
<div id="example-2--transform-a-single-variable-from-multiple-cchs-datasets" class="section level3">
<h3 class="hasAnchor">
<a href="#example-2--transform-a-single-variable-from-multiple-cchs-datasets" class="anchor"></a>Example 2. Transform a single variable from multiple CCHS datasets</h3>
<p>This example shows how you can transform and combine a variable across multiple CCHS cycles. The sex variable in CCHS 2001 (<code>DHHA_SEX</code>) and CCHS 2013 (<code>DHH_SEX</code>) is transformed a common variable (<code>DHH_SEX</code>) and combined into a single dataset. In <code>cchsflow</code> the CCHS 2007 variable name is used as the common variable name. See the <a href="">variableDetails vignette</a> for more information.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex2001 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2001, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2001-c1-1-general-file"</span>, <span class="dt">appendToData =</span> <span class="ot">FALSE</span>, <span class="dt">log =</span> <span class="ot">TRUE</span>, <span class="dt">variables =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DHH_SEX"</span>))</code></pre></div>
<pre><code>## [1] "The variable DHHA_SEX was recoded into DHH_SEX for the database cchs-82M0013-E-2001-c1-1-general-file the following recodes were made:"
##   valueTo From rowsRecoded
## 1       1    1           2
## 2       2    2           1
## 3   NA::a    6           1
## 4   NA::b  7:9           0</code></pre>
<div id="htmlwidget-83894046ade471741931" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-83894046ade471741931">{"x":{"filter":"none","data":[["1","2","3","4"],["2","1","1","NA(a)"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHH_SEX<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">sex2013 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2013, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2013-2014-Annual-component"</span>, <span class="dt">appendToData =</span> <span class="ot">FALSE</span>, <span class="dt">log =</span> <span class="ot">TRUE</span>, <span class="dt">variables =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DHH_SEX"</span>))</code></pre></div>
<pre><code>## [1] "The variable DHH_SEX was recoded into DHH_SEX for the database cchs-82M0013-E-2013-2014-Annual-component the following recodes were made:"
##   valueTo From rowsRecoded
## 1       1    1           2
## 2       2    2           1
## 3   NA::a    6           0
## 4   NA::b  7:9           0</code></pre>
<div id="htmlwidget-681dd883e2722d74eaac" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-681dd883e2722d74eaac">{"x":{"filter":"none","data":[["1","2","3"],["1","2","1"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHH_SEX<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">combinedSex &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/bind.html">bind_rows</a></span>(sex2001, sex2013)</code></pre></div>
<div id="htmlwidget-a727f31e6a91c2285f01" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a727f31e6a91c2285f01">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7"],["2","1","1","NA(a)","1","2","1"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHH_SEX<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="example-3--transform-a-single-variable-from-multiple-databases-that-changes-categories-between-cycles-" class="section level3">
<h3 class="hasAnchor">
<a href="#example-3--transform-a-single-variable-from-multiple-databases-that-changes-categories-between-cycles-" class="anchor"></a>Example 3. Transform a single variable from multiple databases that changes categories between cycles.</h3>
<p>There are many variables in the CCHS that changes in categories between cycles in a way that the variable cannot perserve all categories for all CCHS cycles. An example is the categorical variable for <code>age</code>. <code>cchsflow</code> offer several options to facilitate the use of these variables with inconsistent categories across cycles.</p>
<div id="example-3-1-transform-category-age-variable-into-a-common-variable-for-only-cycles-with-the-same-category-responses" class="section level4">
<h4 class="hasAnchor">
<a href="#example-3-1-transform-category-age-variable-into-a-common-variable-for-only-cycles-with-the-same-category-responses" class="anchor"></a>Example 3.1: transform category <code>age</code> variable into a common variable for only cycles with the same category responses</h4>
<p>The categories in <code>age</code> variable in the CCHS changed in 2005 and therefore it is not possible to have the same <code>age</code> categories across all CCHS cycles. <code>cchsflow</code> offers two options The first option is to transform the <code>age</code> variable into two variables. <code>DHHGAGE_A</code> is the age variable for CCHS cycles 2001-2003, and <code>DHHGAGE_B</code> is the age variable for CCHS cycles 2005-2014. With this option, you cannot combine <code>DHHGAGE_A</code> and <code>DHHGAGE_B</code> into a single dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">age2001 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2001, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2001-c1-1-general-file"</span>, <span class="dt">variables =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DHHGAGE_A"</span>))</code></pre></div>
<pre><code>## [1] "NOTE: Not applicable, don't know, refusal, not stated (96-99) were options only in CCHS 2003, but had zero responses"</code></pre>
<div id="htmlwidget-2c5480131f7ff1ea38be" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2c5480131f7ff1ea38be">{"x":{"filter":"none","data":[["1","2","3","4"],["3","4","6","6"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHHGAGE_A<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">age2013 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2013, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2013-2014-Annual-component"</span>, <span class="dt">variables =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DHHGAGE_B"</span>))</code></pre></div>
<div id="htmlwidget-79ef577adad9866065fa" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-79ef577adad9866065fa">{"x":{"filter":"none","data":[["1","2","3"],["2","1","1"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHHGAGE_B<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="example-3-2-transform-the-categorical-age-variable-into-a-continuous-age-variable" class="section level4">
<h4 class="hasAnchor">
<a href="#example-3-2-transform-the-categorical-age-variable-into-a-continuous-age-variable" class="anchor"></a>Example 3.2: transform the categorical <code>age</code> variable into a continuous <code>age</code> variable</h4>
<p>The categorical <code>age</code> variable can also be transformed into a single continuous <code>age</code> variable. This variable takes the midpoint age of each category for all CCHS cycles. With this option, the age category variable from all CCHS cycles can be combined into a single dataset.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">age2001_cont &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2001, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2001-c1-1-general-file"</span>, <span class="dt">variables =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DHHGAGE_cont"</span>))</code></pre></div>
<pre><code>## [1] "NOTE: Not applicable, don't know, refusal, not stated (96-99) were options in CCHS 2003, but had zero responses"</code></pre>
<div id="htmlwidget-0e464f0a67d1de2aab1d" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-0e464f0a67d1de2aab1d">{"x":{"filter":"none","data":[["1","2","3","4"],[22,27,37,37]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHHGAGE_cont<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">age2013_cont &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2013, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2013-2014-Annual-component"</span>, <span class="dt">variables =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DHHGAGE_cont"</span>))</code></pre></div>
<div id="htmlwidget-c111d6c90bd986a12d65" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-c111d6c90bd986a12d65">{"x":{"filter":"none","data":[["1","2","3"],[16,13,13]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHHGAGE_cont<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">combinedAge_cont &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/bind.html">bind_rows</a></span>(age2001_cont, age2013_cont)</code></pre></div>
<div id="htmlwidget-bfcafa908a75bfe5d4f7" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-bfcafa908a75bfe5d4f7">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7"],[22,27,37,37,16,13,13]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHHGAGE_cont<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div id="step-3--labelling-your-dataset-" class="section level3">
<h3 class="hasAnchor">
<a href="#step-3--labelling-your-dataset-" class="anchor"></a>Step 3. Labelling your dataset.</h3>
<p><code><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable()</a></code> labels individual datasets, while <code>SetDataLabels()</code> labels combined dataset that lose labels during the binding process. Use the <code>SetDataLabels()</code> function to label the variables in your final dataset.</p>
<p><code>labelledCombinedCCHS &lt;- SetDataLabels(dataToLabel = combinedCCHS, variableDetails = varDetails, variablesSheet = varSheet)</code></p>
</div>
<div id="example-4--transform-multiple-variables-from-multiple-datasets" class="section level3">
<h3 class="hasAnchor">
<a href="#example-4--transform-multiple-variables-from-multiple-datasets" class="anchor"></a>Example 4. Transform multiple variables from multiple datasets</h3>
<p>The variables argument in <code><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable()</a></code> is able to handle multiple variables to be transformed from a CCHS dataset. In this example, the age and sex variables from the 2001 and 2013 CCHS datasets will be transformed and labelled using <code><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable()</a></code>. They will then be combined into a single dataset and labelled using <code>SetDataLabels()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">agesex_<span class="dv">2001</span> &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2001, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2001-c1-1-general-file"</span>, <span class="dt">variables =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DHHGAGE_cont"</span>, <span class="st">"DHH_SEX"</span>), <span class="dt">varLabels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">DHHGAGE_cont =</span> <span class="st">"Age"</span>, <span class="dt">DHH_SEX =</span> <span class="st">"Sex"</span>))</code></pre></div>
<pre><code>## [1] "NOTE: Not applicable, don't know, refusal, not stated (96-99) were options in CCHS 2003, but had zero responses"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_label</span>(agesex_<span class="dv">2001</span>)</code></pre></div>
<pre><code>## DHHGAGE_cont      DHH_SEX 
##        "Age"        "Sex"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">agesex_<span class="dv">2013</span> &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2013, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2013-2014-Annual-component"</span>, <span class="dt">variables =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"DHHGAGE_cont"</span>, <span class="st">"DHH_SEX"</span>), <span class="dt">varLabels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">DHHGAGE_cont =</span> <span class="st">"Age"</span>, <span class="dt">DHH_SEX =</span> <span class="st">"Sex"</span>))

<span class="kw">get_label</span>(agesex_<span class="dv">2013</span>)</code></pre></div>
<pre><code>## DHHGAGE_cont      DHH_SEX 
##        "Age"        "Sex"</code></pre>
<p>In the above code, varLabels is called in <code><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable()</a></code> to label the age and sex variables in the 2001 and 2013 datasets. To ensure that the variables in your dataset are labelled, use <code>get_label()</code> to view the variable labels in your transformed dataset. As mentioned previously, varLabels can be used all the variables in <code>variablesSheet.csv</code> or a subset of variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">combinedAgeSex &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/bind.html">bind_rows</a></span>(agesex_<span class="dv">2001</span>, agesex_<span class="dv">2013</span>)
labelledCombinedAgeSex &lt;-<span class="st"> </span><span class="kw">SetDataLabels</span>(<span class="dt">dataToLabel =</span> combinedAgeSex, <span class="dt">variableDetails =</span> varDetails, <span class="dt">variablesSheet =</span> varSheet)</code></pre></div>
<div id="htmlwidget-02f155b6035345de06dd" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-02f155b6035345de06dd">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7"],[22,27,37,37,16,13,13],["2","1","1","NA(a)","1","2","1"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHHGAGE_cont<\/th>\n      <th>DHH_SEX<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1,2]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><p>In the above code, <code>SetDataLabels()</code> is used to label the combined age and sex dataset. Similar to before, you can check if labels have been added using <code>get_label()</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_label</span>(labelledCombinedAgeSex)</code></pre></div>
<pre><code>## DHHGAGE_cont      DHH_SEX 
##        "Age"        "Sex"</code></pre>
<p>For more information on <code>get_label()</code> and other label helper functions, please refer to the <a href="https://strengejacke.github.io/sjlabelled/reference/">sjlabelled</a> package.</p>
</div>
<div id="example-5--transform-all-variables-in-the-variabledetails-sheet" class="section level3">
<h3 class="hasAnchor">
<a href="#example-5--transform-all-variables-in-the-variabledetails-sheet" class="anchor"></a>Example 5. Transform all variables in the variableDetails sheet</h3>
<p>All the variables listed in <code>varDetails.csv</code> will be transformed if the variables argument in <code><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable()</a></code> is not specified. In this example, all of the variables in our mock 2001 and 2013 datasets will be transformed, combined, and labelled.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">transformed2001 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2001, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2001-c1-1-general-file"</span>)</code></pre></div>
<pre><code>## [1] "NOTE: Not applicable, don't know, refusal, not stated (96-99) were options only in CCHS 2003, but had zero responses"
## [1] "NOTE: Not applicable, don't know, refusal, not stated (96-99) were options in CCHS 2003, but had zero responses"
## [1] "NOTE: Don't know (999.7) and refusal (999.8) not included in 2001 CCHS"</code></pre>
<div id="htmlwidget-9019edd439541c96dd99" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9019edd439541c96dd99">{"x":{"filter":"none","data":[["1","2","3","4"],["3","4","6","6"],[22,27,37,37],["2","1","1","NA(a)"],[12,4,20,9]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHHGAGE_A<\/th>\n      <th>DHHGAGE_cont<\/th>\n      <th>DHH_SEX<\/th>\n      <th>FVCDTOT<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1,2,3,4]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">transformed2013 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/bllflow/man/RecWTable.html">RecWTable</a></span>(<span class="dt">dataSource =</span> cchsMock2013, <span class="dt">variableDetails =</span> varDetails, <span class="dt">datasetName =</span> <span class="st">"cchs-82M0013-E-2013-2014-Annual-component"</span>)</code></pre></div>
<pre><code>## [1] "NOTE: Don't know (999.7) and refusal (999.8) not included in 2001 CCHS"</code></pre>
<div id="htmlwidget-acb11a0d2be5d45d2445" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-acb11a0d2be5d45d2445">{"x":{"filter":"none","data":[["1","2","3"],["2","1","1"],[16,13,13],["1","2","1"],[25,15,6]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHHGAGE_B<\/th>\n      <th>DHHGAGE_cont<\/th>\n      <th>DHH_SEX<\/th>\n      <th>FVCDTOT<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1,2,3,4]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">combinedCCHS &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/dplyr/man/bind.html">bind_rows</a></span>(transformed2001, transformed2013)
labelledCombinedCCHS &lt;-<span class="st"> </span><span class="kw">SetDataLabels</span>(<span class="dt">dataToLabel =</span> combinedCCHS, <span class="dt">variableDetails =</span> varDetails, <span class="dt">variablesSheet =</span> varSheet)</code></pre></div>
<div id="htmlwidget-94ec02e2dec4f724be87" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-94ec02e2dec4f724be87">{"x":{"filter":"none","data":[["1","2","3","4","5","6","7"],["3","4","6","6","NA","NA","NA"],[22,27,37,37,16,13,13],["2","1","1","NA(a)","1","2","1"],[12,4,20,9,25,15,6],["NA","NA","NA","NA","2","1","1"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>DHHGAGE_A<\/th>\n      <th>DHHGAGE_cont<\/th>\n      <th>DHH_SEX<\/th>\n      <th>FVCDTOT<\/th>\n      <th>DHHGAGE_B<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-center","targets":[0,1,2,3,4,5]},{"orderable":false,"targets":0}],"dom":"t","order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script><div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">get_label</span>(labelledCombinedCCHS)</code></pre></div>
<pre><code>##                     DHHGAGE_A                  DHHGAGE_cont 
##                         "Age"                         "Age" 
##                       DHH_SEX                       FVCDTOT 
##                         "Sex" "Total fruit/veg consumption" 
##                     DHHGAGE_B 
##                         "Age"</code></pre>
</div>
<div id="step-4--warning-messages" class="section level3">
<h3 class="hasAnchor">
<a href="#step-4--warning-messages" class="anchor"></a>Step 4. Warning messages</h3>
<p>Warning messages will appear when the variables in your dataset do not match the variables in your two worksheets.</p>
<p>In our example, our mock CCHS datasets only contain a two of variables from <code>variables.csv</code> and <code>varDetails.csv</code>.</p>
<p>As such, warning messages about variables not included in our datasets will be printed.</p>
<pre><code>## Warning in RecodeColumns(dataSource = dataSource, variablesToProcess =
## allVariablesDetected, : Data cchs-82M0013-E-2001-c1-1-general-file does not
## contain the variable SMKAG01C</code></pre>
</div>
</div>
<div id="using-your-own-cchs-dataset-to-transform-variables" class="section level2">
<h2 class="hasAnchor">
<a href="#using-your-own-cchs-dataset-to-transform-variables" class="anchor"></a>Using your own CCHS dataset to transform variables</h2>
<p>As mentioned previously, CCHS datasets cannot be shared publicly. But that does not mean you cannot use a saved CCHS dataset on your computer to transform variables. Below illustrates a code that can be used to load a CCHS dataset onto your R environment.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cchsDataset &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span>(<span class="st">"~/Documents/cchsdataset.csv"</span>)</code></pre></div>
<p>You can copy this code to your clipboard and modify the path to where your dataset is saved onto your computer.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#getting-started">Getting Started</a></li>
      <li><a href="#steps">Steps</a></li>
      <li><a href="#using-your-own-cchs-dataset-to-transform-variables">Using your own CCHS dataset to transform variables</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Doug Manuel, Warsame Yusuf, Rostyslav Vyuha.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
