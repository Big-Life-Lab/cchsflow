<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started • cchsflow</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="48x48" href="../favicon-48x48.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Get started">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cchsflow</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/get_started.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/variables_sheet.html">variables.csv sheet</a>
    </li>
    <li>
      <a href="../articles/variable_details.html">variable_details.csv sheet</a>
    </li>
    <li>
      <a href="../articles/derived_variables.html">Derived variables</a>
    </li>
    <li>
      <a href="../articles/how_to_add_variables.html">How to add variables</a>
    </li>
    <li>
      <a href="../articles/tagged_na_usage.html">How to use tagged_na</a>
    </li>
    <li>
      <a href="../articles/duplicate_datasets.html">CCHS datasets that overlap each other</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Big-Life-Lab/cchsflow/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>

    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Big-Life-Lab/cchsflow/blob/HEAD/vignettes/get_started.Rmd" class="external-link"><code>vignettes/get_started.Rmd</code></a></small>
      <div class="hidden name"><code>get_started.Rmd</code></div>

    </div>

    
    
<div class="section level4">
<h4 id="load-packages">Load packages<a class="anchor" aria-label="anchor" href="#load-packages"></a>
</h4>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install release version from CRAN</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"cchsflow"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Install the most recent version from GitHub</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"Big-Life-Lab/cchsflow"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://big-life-lab.github.io/cchsflow/">cchsflow</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="transform-variables-into-harmonized-versions">Transform variables into harmonized versions<a class="anchor" aria-label="anchor" href="#transform-variables-into-harmonized-versions"></a>
</h2>
<p>Use <code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> to transform the variables of a
CCHS dataset.</p>
<div class="section level3">
<h3 id="example-1--transform-a-single-variable-from-a-single-database">Example 1. Transform a single variable from a single database<a class="anchor" aria-label="anchor" href="#example-1--transform-a-single-variable-from-a-single-database"></a>
</h3>
<p>In this example, the <code>sex</code> variable in the 2001 CCHS cycle
is transformed into a harmonized <code>sex</code> variable that is
consistent all CCHS cycles.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sex2001</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="st">"DHH_SEX"</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>DHH_SEX <span class="op">=</span> <span class="st">"SEX"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; The variable DHHA_SEX was recoded into DHH_SEX for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to  From rows_recoded</span></span>
<span><span class="co">#&gt; 1        1     1           79</span></span>
<span><span class="co">#&gt; 2        2     2          121</span></span>
<span><span class="co">#&gt; 3    NA::a     6            0</span></span>
<span><span class="co">#&gt; 4    NA::b [7,9]            0</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   DHH_SEX</span></span>
<span><span class="co">#&gt; 1       2</span></span>
<span><span class="co">#&gt; 2       2</span></span>
<span><span class="co">#&gt; 3       1</span></span>
<span><span class="co">#&gt; 4       2</span></span>
<span><span class="co">#&gt; 5       2</span></span>
<span><span class="co">#&gt; 6       1</span></span></code></pre>
<p><code>cchs2001_p</code> is the name of test CCHS data that is
included in the <em>cchsflow</em> library. <em>cchsflow</em> includes
test CCHS data for the public use microdata file (PUMF) for all general
household survey (.1 versions) between 2001 and 2013. Each survey cycle
has a sample of 200 respondents. <code>cchs2000_p</code> indicates this
isthe CCHS 2001 PUMF file. See <a href="../reference/index.html">Reference</a> for more information of
each CCHS cycle.</p>
<p>You’ll want to use <em>cchsflow</em> on your own CCHS data that
you’ll need to first load: something like
<code>cchs2001 &lt;- read.csv("~/data/cchs2001.csv")</code>. CCHS PUMF
data can be obtained from Statistics Canada.</p>
<p><code>DHH_SEX</code> is the name of the harmonized variable for sex.
Up to 2007, the variable names in CCHS changed every cycle. Since 2007,
there has <em>generally</em> been a consistent name. <em>cchsflow</em>
uses the variable name from the 2007 cycle whenever possible. For
example, in the CCHS 2001, the variable for sex is <code>DHHA_SEX</code>
and in CCHS 2007 the same variable is <code>DHH_SEX</code>. This name,
<code>DHH_SEX</code> is the harmonized name for sex, meaning
<code>DHHA_SEX</code> is transformed to <code>DHH_SEX</code> using
<code><a href="../reference/rec_with_table.html">rec_with_table()</a></code>.</p>
<p>The rules for the transformation and harmonization are in two
dataframes that are included in <code>variables</code> and
<code>variable_details</code>, both included in <em>cchsflow</em>. There
are vignettes that further describe <code>variables</code> and
<code>variable_details</code>, including how to add or customize
transformed variables.</p>
</div>
<div class="section level3">
<h3 id="which-variables-are-transformed-how-good-is-the-transformation">Which variables are transformed? How “good” is the
transformation?<a class="anchor" aria-label="anchor" href="#which-variables-are-transformed-how-good-is-the-transformation"></a>
</h3>
<p><em>cchsflow</em> includes commonly used sociodemographic, health
behaviour and health status variables. In general, variables across CCHS
cycles can be grouped into five categories:</p>
<ol style="list-style-type: decimal">
<li><p>Consistent and unchanged across all cycles. These variables have
no changes to the wording of the question that was asked, the response
values and who was asked the question (same inclusion criteria and skip
pattern).</p></li>
<li><p>Mostly consistent across cycles. These variables may have a small
change in wording or response category. Notes for these variables are
printed to the console when they are recoded with
<code><a href="../reference/rec_with_table.html">rec_with_table()</a></code>. The notes are contained in
<code>variable_details$notes</code>. Caution is required when using
these variables. The notes should be reviewed to assess whether these
variables can be used in your study. See <a href="#example2">Example
2</a>.</p></li>
<li><p>Either not collected in all cycles or have major changes between
cycles. These variable may be included in <em>cchsflow</em> with a note
that says which cycles include the variable and can be transformed to a
common variable. See <a href="#example4">Example 4</a>.</p></li>
<li><p>Mostly consistent but with complex changes or transformation
rules. See the <a href="../reference/index.html">Reference</a> for these
derived and “Potentially problematic variables”. See <a href="#example7">Example 7</a>.</p></li>
<li><p>Not consistent between cycles. Variable that are inconsistent or
not asked in most cycles are not included in <em>cchsflow</em>. In the
future, we hope to include these variables with an marker that they’ve
been reviewed but rejected from inclusion in <em>cchsflow</em>.</p></li>
</ol>
</div>
<div class="section level3">
<h3 id="example2">Example 2. Variable transformation with a note<a class="anchor" aria-label="anchor" href="#example2"></a>
</h3>
<p><code>notes</code> provide context for the decisions that informed
harmonization that may affect your decision to use a harmonized
variable.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/warning.html" class="external-link">warning</a></span><span class="op">(</span></span>
<span>  <span class="st">"cchsflow includes "</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">variable_details</span><span class="op">$</span><span class="va">notes</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="st">" variables with notes."</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning: cchsflow includes 113 variables with notes.</span></span></code></pre></div>
<p>For example, for <code>DHHGAGE_A</code> the category
<code>NA::b</code> has the following <code>note</code>:</p>
<p><code>Not applicable, don't know, refusal, not stated (96-99) were options only in CCHS 2003, but had zero responses</code>.</p>
<p>This note informs the decision to combine values 96 to 99 in
<code>DHHGAGE_A</code> for CCHS2003 into one common missing value
<code>NA::b</code>. The label for the <code>NA::b</code> category is,
“<code>don't know (97); refusal (98); not stated (99)</code>”.</p>
<p>By default, <code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> prints notes to the
console.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">BMI2001</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="st">"HWTGBMI"</span>, log <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; NOTE for HWTGBMI: CCHS 2001 restricts BMI to ages 20-64. CCHS 2015-2016 uses adjusted BMI. Consider using using HWTGBMI_der for the most concistent BMI variable across all CCHS cycles. See documentation for BMI_fun() in derived variables for more details, or type ?BMI_fun in the console.</span></span>
<span><span class="co">#&gt; NOTE for HWTGBMI: CCHS 2001 and 2003 codes not applicable and missing variables as 999.6 and 999.7-999.9 respectively, while CCHS 2005 onwards codes not applicable and missing variables as 999.96 and 999.7-999.99 respectively</span></span>
<span><span class="co">#&gt; NOTE for HWTGBMI: Don't know (999.7) and refusal (999.8) not included in 2001 CCHS</span></span>
<span><span class="co">#&gt; The variable HWTAGBMI was recoded into HWTGBMI for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to          From rows_recoded</span></span>
<span><span class="co">#&gt; 1     copy [8.07,137.46]          142</span></span>
<span><span class="co">#&gt; 2    NA::a         999.6           58</span></span>
<span><span class="co">#&gt; 3    NA::b [999.7,999.9]            0</span></span></code></pre></div>
<div class="section level4">
<h4 id="notes-with-guidance-or-additional-information">Notes with guidance or additional information<a class="anchor" aria-label="anchor" href="#notes-with-guidance-or-additional-information"></a>
</h4>
<p>Several variables such as BMI have a quite a few notes reflecting a
range of changes that occurred over CCHS cycles. Variables with notes
can usually be used after reviewing and considering whether or how the
variable changes affect your use. There can also be further guidance in
notes. For example, BMI notes include advice to use
<code>HWTGBMI_der</code>. Despite the large number of changes, BMI can
be used for most studies because the common transformed variable
<code>HWTGBMI_der</code> was derived from height and weight variables
that are included and largely unchanged across CCHS cycles. However, to
use <code>HWTGBMI_der</code> you’ll also need to include the transformed
measures for height (<code>HWTGHTM</code>) and weight
(<code>HWTGWTK</code>). More information about <code>HWTGBMI_der</code>
can be found in the documentation reference for ‘derived variable
functions’ or by typing <code>?BMI_fun</code> in the R console.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">BMI2001C</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HWTGHTM"</span>, <span class="st">"HWTGWTK"</span>, <span class="st">"HWTGBMI_der"</span><span class="op">)</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; NOTE for HWTGHTM: 2001 and 2003 CCHS use inches, values converted to meters to 3 decimal points</span></span>
<span><span class="co">#&gt; NOTE for HWTGHTM: 74+ inches converted to 76 inches</span></span>
<span><span class="co">#&gt; The variable HWTAGHT was recoded into HWTGHTM for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;    value_to From rows_recoded</span></span>
<span><span class="co">#&gt; 1     1.118    1            0</span></span>
<span><span class="co">#&gt; 2     1.143    2            0</span></span>
<span><span class="co">#&gt; 3     1.168    3            0</span></span>
<span><span class="co">#&gt; 4     1.194    4            0</span></span>
<span><span class="co">#&gt; 5     1.219    5            0</span></span>
<span><span class="co">#&gt; 6     1.245    6            0</span></span>
<span><span class="co">#&gt; 7      1.27    7            0</span></span>
<span><span class="co">#&gt; 8     1.295    8            0</span></span>
<span><span class="co">#&gt; 9     1.321    9            0</span></span>
<span><span class="co">#&gt; 10    1.346   10            0</span></span>
<span><span class="co">#&gt; 11    1.372   11            0</span></span>
<span><span class="co">#&gt; 12    1.397   12            0</span></span>
<span><span class="co">#&gt; 13    1.422   13            1</span></span>
<span><span class="co">#&gt; 14    1.448   14            0</span></span>
<span><span class="co">#&gt; 15    1.473   15            1</span></span>
<span><span class="co">#&gt; 16    1.499   16            2</span></span>
<span><span class="co">#&gt; 17    1.524   17            8</span></span>
<span><span class="co">#&gt; 18    1.549   18            7</span></span>
<span><span class="co">#&gt; 19    1.575   19           21</span></span>
<span><span class="co">#&gt; 20      1.6   20           12</span></span>
<span><span class="co">#&gt; 21    1.626   21           13</span></span>
<span><span class="co">#&gt; 22    1.651   22           19</span></span>
<span><span class="co">#&gt; 23    1.676   23           16</span></span>
<span><span class="co">#&gt; 24    1.702   24           21</span></span>
<span><span class="co">#&gt; 25    1.727   25           16</span></span>
<span><span class="co">#&gt; 26    1.753   26           11</span></span>
<span><span class="co">#&gt; 27    1.778   27           13</span></span>
<span><span class="co">#&gt; 28    1.803   28           14</span></span>
<span><span class="co">#&gt; 29    1.829   29           10</span></span>
<span><span class="co">#&gt; 30    1.854   30            8</span></span>
<span><span class="co">#&gt; 31     1.93   31            6</span></span>
<span><span class="co">#&gt; 32    NA::a   96            0</span></span>
<span><span class="co">#&gt; 33    NA::b   99            1</span></span>
<span><span class="co">#&gt; The variable HWTAGWTK was recoded into HWTGWTK for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to            From rows_recoded</span></span>
<span><span class="co">#&gt; 1     copy    [27.0,135.0]          199</span></span>
<span><span class="co">#&gt; 2    NA::a          999.96            0</span></span>
<span><span class="co">#&gt; 3    NA::b [999.97,999.99]            1</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="warning-messages">Warning messages<a class="anchor" aria-label="anchor" href="#warning-messages"></a>
</h4>
<p>Warning messages will appear when your dataset is missing variables
in your <code>variables</code> worksheet or
<code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> call.</p>
</div>
<div class="section level4">
<h4 id="variable-names-and-labels-included">Variable names and labels included<a class="anchor" aria-label="anchor" href="#variable-names-and-labels-included"></a>
</h4>
<p><code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> can include variable and value labels
for the harmonized variables using the <code>var_labels</code>
attribute. By default, <code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> will include all
labels if then all variables in <code>variables</code> are recoded. See
<a href="#example6">Example 6</a>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sex2001</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="st">"DHH_SEX"</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DHH_SEX"</span> <span class="op">=</span> <span class="st">"Sex"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; The variable DHHA_SEX was recoded into DHH_SEX for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to  From rows_recoded</span></span>
<span><span class="co">#&gt; 1        1     1           79</span></span>
<span><span class="co">#&gt; 2        2     2          121</span></span>
<span><span class="co">#&gt; 3    NA::a     6            0</span></span>
<span><span class="co">#&gt; 4    NA::b [7,9]            0</span></span></code></pre></div>
<p>Labels can then be used in plots and tables.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/barplot.html" class="external-link">barplot</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="fu"><a href="https://rlang.r-lib.org/reference/as_label.html" class="external-link">as_label</a></span><span class="op">(</span><span class="va">sex2001</span><span class="op">$</span><span class="va">DHH_SEX</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palettes.html" class="external-link">cm.colors</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">140</span><span class="op">)</span>,</span>
<span>  legend <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  main <span class="op">=</span> <span class="fu"><a href="https://strengejacke.github.io/sjlabelled/reference/get_label.html" class="external-link">get_label</a></span><span class="op">(</span><span class="va">sex2001</span><span class="op">$</span><span class="va">DHH_SEX</span><span class="op">)</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Frequency (n)"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="get_started_files/figure-html/fig1-1.png" width="672"></p>
</div>
<div class="section level4">
<h4 id="missing-data">Missing data<a class="anchor" aria-label="anchor" href="#missing-data"></a>
</h4>
<p>If you’ve been watching, you may have noticed that <em>cchsflow</em>
recodes the values in factor or categorical variables for 6 (“not
applicable”), 7 (“don’t know”), and 8 (“refusal”), 9 (“not stated”) into
<code>tagged_NA</code> values NA(a) (“not applicable”) and NA (b)
(“missing”). There are two reasons. First, the typical uses of CCHS
consider the two values “not applicable” and “missing” for most
situations. Second, R and other open languages typically support only
one NA.</p>
<p>Be careful when use use <code>NA</code> in your study. See <a href="../articles/tagged_na_usage.html"><code>missing data (tagged_na)</code></a>for
more information.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://haven.tidyverse.org" class="external-link">haven</a></span><span class="op">)</span></span>
<span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, <span class="fu"><a href="https://haven.tidyverse.org/reference/tagged_na.html" class="external-link">tagged_na</a></span><span class="op">(</span><span class="st">"a"</span><span class="op">)</span>, <span class="fu"><a href="https://haven.tidyverse.org/reference/tagged_na.html" class="external-link">tagged_na</a></span><span class="op">(</span><span class="st">"b"</span><span class="op">)</span>, <span class="fu"><a href="https://haven.tidyverse.org/reference/tagged_na.html" class="external-link">tagged_na</a></span><span class="op">(</span><span class="st">"b"</span><span class="op">)</span>, <span class="cn">NA</span><span class="op">)</span></span>
<span><span class="va">x</span></span>
<span><span class="co">#&gt; [1]  1  2  3  4  5 NA NA NA NA</span></span>
<span><span class="co"># Do you want to calculate mean by excluding 'missing', 'not applicable', or both?</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://haven.tidyverse.org/reference/tagged_na.html" class="external-link">is_tagged_na</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"a"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 8</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://haven.tidyverse.org/reference/tagged_na.html" class="external-link">is_tagged_na</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"b"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 7</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 5</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://haven.tidyverse.org/reference/tagged_na.html" class="external-link">is_tagged_na</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 6</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="default-arguments-for-rec_with_table">Default arguments for <code>rec_with_table()</code><a class="anchor" aria-label="anchor" href="#default-arguments-for-rec_with_table"></a>
</h4>
<p>With <code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> there are also default arguments
that do not need to be called unless you would like to modify them.</p>
<ul>
<li>
<code>variables</code> defaults to NULL. This results in the
<code>variables.csv</code> sheet in the cchsflow package being used to
specify which variables to transform. This argument can be modified if
you want use your own <code>variables.csv</code> sheet or by specifying
particular variables to transform.</li>
<li>
<code>database_name</code> defaults to NULL. This results in
<code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> using the database indicated in the
<code>data</code> argument.</li>
<li>
<code>variable_details</code> defaults to NULL. This results in the
<code>variable_details.csv</code> sheet in the cchsflow being used. This
argument can be modified if want use your own
<code>variable_details.csv</code> sheet.</li>
<li>
<code>else_value</code> defaults to NA. Values out of range set to
NA.</li>
<li>
<code>append_to_data</code> defaults to FALSE. Transformed variables
will not be appended to the original CCHS dataset.</li>
<li>
<code>log</code> defaults to FALSE. Logs of the variable
transformations will not be displayed.</li>
<li>
<code>notes</code> defaults to TRUE. Information in the
<code>Notes</code> column from <code>variable_details.csv</code> will be
displayed</li>
<li>
<code>var_labels</code> is set to NULL. This argument can be used to
add labels to a transformed dataset that only contains a subset of
variables from <code>variables.csv</code>. The format to add labels to a
subset of variables is <code>c(variable = "Label")</code>.</li>
<li>
<code>attach_data_name</code> is set to FALSE. This argument can be
used to append a column that denotes the name of the dataset each
transformed row came from. See <a href="#example8">Example 8</a>.</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="example-3--transform-a-single-variable-from-multiple-cchs-datasets">Example 3. Transform a single variable from multiple CCHS
datasets<a class="anchor" aria-label="anchor" href="#example-3--transform-a-single-variable-from-multiple-cchs-datasets"></a>
</h3>
<p>This example shows how you can transform and combine a variable
across multiple CCHS cycles. The sex variable in CCHS 2001
(<code>DHHA_SEX</code>) and CCHS 2012 (<code>DHH_SEX</code>) is
transformed a common variable (<code>DHH_SEX</code>) and combined into a
single dataset. In <em>cchsflow</em> the CCHS 2007 variable name is used
as the common variable name. See the <a href="variable_details.html">variable_details vignette</a> for more
information.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">sex2001</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="st">"DHH_SEX"</span>, log <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; The variable DHHA_SEX was recoded into DHH_SEX for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to  From rows_recoded</span></span>
<span><span class="co">#&gt; 1        1     1           79</span></span>
<span><span class="co">#&gt; 2        2     2          121</span></span>
<span><span class="co">#&gt; 3    NA::a     6            0</span></span>
<span><span class="co">#&gt; 4    NA::b [7,9]            0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">sex2001</span><span class="op">)</span></span>
<span><span class="co">#&gt;   DHH_SEX</span></span>
<span><span class="co">#&gt; 1       2</span></span>
<span><span class="co">#&gt; 2       2</span></span>
<span><span class="co">#&gt; 3       1</span></span>
<span><span class="co">#&gt; 4       2</span></span>
<span><span class="co">#&gt; 5       2</span></span>
<span><span class="co">#&gt; 6       1</span></span>
<span></span>
<span><span class="va">sex2012</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2012_p</span>, <span class="st">"DHH_SEX"</span>, log <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; The variable DHH_SEX was recoded into DHH_SEX for the database cchs2012_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to  From rows_recoded</span></span>
<span><span class="co">#&gt; 1        1     1           78</span></span>
<span><span class="co">#&gt; 2        2     2          122</span></span>
<span><span class="co">#&gt; 3    NA::a     6            0</span></span>
<span><span class="co">#&gt; 4    NA::b [7,9]            0</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">sex2012</span><span class="op">)</span></span>
<span><span class="co">#&gt;     DHH_SEX</span></span>
<span><span class="co">#&gt; 195       1</span></span>
<span><span class="co">#&gt; 196       2</span></span>
<span><span class="co">#&gt; 197       1</span></span>
<span><span class="co">#&gt; 198       2</span></span>
<span><span class="co">#&gt; 199       1</span></span>
<span><span class="co">#&gt; 200       1</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combined_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_rec_data.html">merge_rec_data</a></span><span class="op">(</span><span class="va">sex2001</span>, <span class="va">sex2012</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   DHH_SEX</span></span>
<span><span class="co">#&gt; 1       2</span></span>
<span><span class="co">#&gt; 2       2</span></span>
<span><span class="co">#&gt; 3       1</span></span>
<span><span class="co">#&gt; 4       2</span></span>
<span><span class="co">#&gt; 5       2</span></span>
<span><span class="co">#&gt; 6       1</span></span>
<span><span class="co">#&gt;     DHH_SEX</span></span>
<span><span class="co">#&gt; 395       1</span></span>
<span><span class="co">#&gt; 396       2</span></span>
<span><span class="co">#&gt; 397       1</span></span>
<span><span class="co">#&gt; 398       2</span></span>
<span><span class="co">#&gt; 399       1</span></span>
<span><span class="co">#&gt; 400       1</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="example4">Example 4. Transform a single variable from multiple databases that
changes categories between cycles.<a class="anchor" aria-label="anchor" href="#example4"></a>
</h3>
<p>There are many variables in the CCHS that changes in categories
between cycles in a way that the variable cannot preserve all categories
for all CCHS cycles. An example is the categorical variable for
<code>age</code>. <em>cchsflow</em> offers three options to facilitate
the use of these variables with inconsistent categories across
cycles.</p>
<div class="section level4">
<h4 id="option-1-transform-category-age-variable-into-a-common-variable-for-only-cycles-with-the-same-category-responses">Option 1: transform category <code>age</code> variable into a common
variable for only cycles with the same category responses<a class="anchor" aria-label="anchor" href="#option-1-transform-category-age-variable-into-a-common-variable-for-only-cycles-with-the-same-category-responses"></a>
</h4>
<p>Transform the <code>age</code> variable into variables that cannot be
combined across cycles. The categories in <code>age</code> variable in
the CCHS changed in 2005 and therefore it is not possible to have the
same <code>age</code> categories across all CCHS cycles.</p>
<p><code>DHHGAGE_A</code> is the age variable for CCHS cycles 2001-2003,
and <code>DHHGAGE_B</code> is the age variable for CCHS cycles
2005-2018.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age2001</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="st">"DHHGAGE_A"</span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; NOTE for DHHGAGE_A: Not applicable, don't know, refusal, not stated (96-99) were options only in CCHS 2003, but had zero responses</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">age2001</span><span class="op">)</span></span>
<span><span class="co">#&gt;   DHHGAGE_A</span></span>
<span><span class="co">#&gt; 1        15</span></span>
<span><span class="co">#&gt; 2        15</span></span>
<span><span class="co">#&gt; 3         5</span></span>
<span><span class="co">#&gt; 4        14</span></span>
<span><span class="co">#&gt; 5         3</span></span>
<span><span class="co">#&gt; 6        14</span></span>
<span></span>
<span><span class="va">age2012</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2012_p</span>, <span class="st">"DHHGAGE_B"</span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">age2012</span><span class="op">)</span></span>
<span><span class="co">#&gt;     DHHGAGE_B</span></span>
<span><span class="co">#&gt; 195         8</span></span>
<span><span class="co">#&gt; 196        11</span></span>
<span><span class="co">#&gt; 197         6</span></span>
<span><span class="co">#&gt; 198        15</span></span>
<span><span class="co">#&gt; 199         9</span></span>
<span><span class="co">#&gt; 200        16</span></span></code></pre></div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combined_age_cat</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_rec_data.html">merge_rec_data</a></span><span class="op">(</span><span class="va">age2001</span>, <span class="va">age2012</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   DHHGAGE_A DHHGAGE_B</span></span>
<span><span class="co">#&gt; 1        15     NA(c)</span></span>
<span><span class="co">#&gt; 2        15     NA(c)</span></span>
<span><span class="co">#&gt; 3         5     NA(c)</span></span>
<span><span class="co">#&gt; 4        14     NA(c)</span></span>
<span><span class="co">#&gt; 5         3     NA(c)</span></span>
<span><span class="co">#&gt; 6        14     NA(c)</span></span>
<span><span class="co">#&gt;     DHHGAGE_A DHHGAGE_B</span></span>
<span><span class="co">#&gt; 395     NA(c)         8</span></span>
<span><span class="co">#&gt; 396     NA(c)        11</span></span>
<span><span class="co">#&gt; 397     NA(c)         6</span></span>
<span><span class="co">#&gt; 398     NA(c)        15</span></span>
<span><span class="co">#&gt; 399     NA(c)         9</span></span>
<span><span class="co">#&gt; 400     NA(c)        16</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="option-2-transform-the-categorical-age-variable-into-a-continuous-age_cont-variable">Option 2: transform the categorical <code>age</code> variable into a
continuous <code>age_cont</code> variable<a class="anchor" aria-label="anchor" href="#option-2-transform-the-categorical-age-variable-into-a-continuous-age_cont-variable"></a>
</h4>
<p>Transform categorical variables such as <code>age</code> into a
single harmonized <code>age_cont</code> variable. This variable takes
the midpoint age of each category for all CCHS cycles. With this option,
the age category variable from all CCHS cycles can be combined into a
single dataset.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age2001_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="st">"DHHGAGE_cont"</span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">age2001_cont</span><span class="op">)</span></span>
<span><span class="co">#&gt;   DHHGAGE_cont</span></span>
<span><span class="co">#&gt; 1           85</span></span>
<span><span class="co">#&gt; 2           85</span></span>
<span><span class="co">#&gt; 3           32</span></span>
<span><span class="co">#&gt; 4           77</span></span>
<span><span class="co">#&gt; 5           22</span></span>
<span><span class="co">#&gt; 6           77</span></span>
<span></span>
<span><span class="va">age2012_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2012_p</span>, <span class="st">"DHHGAGE_cont"</span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">age2012_cont</span><span class="op">)</span></span>
<span><span class="co">#&gt;     DHHGAGE_cont</span></span>
<span><span class="co">#&gt; 195           42</span></span>
<span><span class="co">#&gt; 196           57</span></span>
<span><span class="co">#&gt; 197           32</span></span>
<span><span class="co">#&gt; 198           77</span></span>
<span><span class="co">#&gt; 199           47</span></span>
<span><span class="co">#&gt; 200           85</span></span></code></pre></div>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combined_age_cont</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_rec_data.html">merge_rec_data</a></span><span class="op">(</span><span class="va">age2001_cont</span>, <span class="va">age2012_cont</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt;   DHHGAGE_cont</span></span>
<span><span class="co">#&gt; 1           85</span></span>
<span><span class="co">#&gt; 2           85</span></span>
<span><span class="co">#&gt; 3           32</span></span>
<span><span class="co">#&gt; 4           77</span></span>
<span><span class="co">#&gt; 5           22</span></span>
<span><span class="co">#&gt; 6           77</span></span>
<span><span class="co">#&gt;     DHHGAGE_cont</span></span>
<span><span class="co">#&gt; 395           42</span></span>
<span><span class="co">#&gt; 396           57</span></span>
<span><span class="co">#&gt; 397           32</span></span>
<span><span class="co">#&gt; 398           77</span></span>
<span><span class="co">#&gt; 399           47</span></span>
<span><span class="co">#&gt; 400           85</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="option-3-transform-the-categorical-age-variable-into-a-harmonized-categorical-variable">Option 3: transform the categorical <code>age</code> variable into a
harmonized categorical variable<a class="anchor" aria-label="anchor" href="#option-3-transform-the-categorical-age-variable-into-a-harmonized-categorical-variable"></a>
</h4>
<p><em>cchsflow</em> often includes a common harmonized categorical
variable that has new, consistent categories across all cycles. These
new categorical variables generally have fewer category levels than the
original variables, reflecting the need to combine categories. Read the
<code>Notes</code> variable for details.</p>
</div>
</div>
<div class="section level3">
<h3 id="example-5--transform-multiple-variables-from-multiple-datasets">Example 5. Transform multiple variables from multiple datasets<a class="anchor" aria-label="anchor" href="#example-5--transform-multiple-variables-from-multiple-datasets"></a>
</h3>
<p>The variables argument in <code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> allows
multiple variables to be transformed from a CCHS dataset. In this
example, the age and sex variables from the 2001 and 2012 CCHS datasets
will be transformed and labeled using <code><a href="../reference/rec_with_table.html">rec_with_table()</a></code>.
They will then be combined into a single dataset and labeled using
<code><a href="../reference/merge_rec_data.html">merge_rec_data()</a></code>.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">age_sex_2001</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DHHGAGE_cont"</span>, <span class="st">"DHH_SEX"</span><span class="op">)</span>,</span>
<span>  var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>DHHGAGE_cont <span class="op">=</span> <span class="st">"Age"</span>, DHH_SEX <span class="op">=</span> <span class="st">"Sex"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span></span>
<span><span class="fu"><a href="https://strengejacke.github.io/sjlabelled/reference/get_label.html" class="external-link">get_label</a></span><span class="op">(</span><span class="va">age_sex_2001</span><span class="op">)</span></span>
<span><span class="co">#&gt;      DHH_SEX DHHGAGE_cont </span></span>
<span><span class="co">#&gt;        "Sex"        "Age"</span></span>
<span></span>
<span><span class="va">age_sex_2012</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2012_p</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"DHHGAGE_cont"</span>, <span class="st">"DHH_SEX"</span><span class="op">)</span>,</span>
<span>  var_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>DHHGAGE_cont <span class="op">=</span> <span class="st">"Age"</span>, DHH_SEX <span class="op">=</span> <span class="st">"Sex"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span></span>
<span><span class="fu"><a href="https://strengejacke.github.io/sjlabelled/reference/get_label.html" class="external-link">get_label</a></span><span class="op">(</span><span class="va">age_sex_2012</span><span class="op">)</span></span>
<span><span class="co">#&gt;      DHH_SEX DHHGAGE_cont </span></span>
<span><span class="co">#&gt;        "Sex"        "Age"</span></span></code></pre></div>
<p>In the above example, <code>var_labels</code> is called in
<code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> to label the age and sex variables in the
2001 and 2012 datasets. Use <code><a href="https://strengejacke.github.io/sjlabelled/reference/get_label.html" class="external-link">get_label()</a></code> to view the
variable labels in your transformed dataset. As mentioned previously,
<code>var_labels</code> can be used all the variables in
<code>variables.csv</code> or a subset of variables.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">combined_age_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_rec_data.html">merge_rec_data</a></span><span class="op">(</span><span class="va">age_sex_2001</span>, <span class="va">age_sex_2012</span><span class="op">)</span></span></code></pre></div>
<p>In the above code, <code><a href="../reference/merge_rec_data.html">merge_rec_data()</a></code> is used to merge and
label the combined age and sex dataset. Similar to before, you can check
if labels have been added using <code><a href="https://strengejacke.github.io/sjlabelled/reference/get_label.html" class="external-link">get_label()</a></code>.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://strengejacke.github.io/sjlabelled/reference/get_label.html" class="external-link">get_label</a></span><span class="op">(</span><span class="va">combined_age_sex</span><span class="op">)</span></span>
<span><span class="co">#&gt;      DHH_SEX DHHGAGE_cont </span></span>
<span><span class="co">#&gt;        "Sex"        "Age"</span></span></code></pre></div>
<p>For more information on <code><a href="https://strengejacke.github.io/sjlabelled/reference/get_label.html" class="external-link">get_label()</a></code> and other label
helper functions, please refer to the <a href="https://strengejacke.github.io/sjlabelled/reference/" class="external-link">sjlabelled</a>
package.</p>
</div>
<div class="section level3">
<h3 id="example6">Example 6. Transform all variables in the variable_details
sheet<a class="anchor" aria-label="anchor" href="#example6"></a>
</h3>
<p>All the variables listed in <code>variables.csv</code> &amp;
<code>variable_details.csv</code> will be transformed if the variables
argument in <code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> is not specified. In this
example, all variables specified in the two worksheets will be
transformed, combined, and labeled for the 2001 and 2012 CCHS
cycles.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example of transforming and merging data</span></span>
<span><span class="va">transformed2001</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cchs2001_p</span>, notes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">transformed2012</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">cchs2012_p</span>, notes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">combined_cchs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_rec_data.html">merge_rec_data</a></span><span class="op">(</span><span class="va">transformed2001</span>, <span class="va">transformed2012</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Sample of CCHS 2001 data</caption>
<thead><tr class="header">
<th align="right">ADMA_RNO</th>
<th align="right">GEOAGPRV</th>
<th align="right">GEOADPMF</th>
<th align="right">ADMA_PRX</th>
<th align="right">ADMA_IMP</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">6351</td>
<td align="right">10</td>
<td align="right">10901</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">72355</td>
<td align="right">10</td>
<td align="right">10901</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">1903</td>
<td align="right">10</td>
<td align="right">10901</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">6166</td>
<td align="right">10</td>
<td align="right">10901</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">37525</td>
<td align="right">10</td>
<td align="right">10901</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="right">70295</td>
<td align="right">10</td>
<td align="right">10901</td>
<td align="right">2</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="example7">Example 7. Transform CCHS derived variables such as Body Mass Index
(BMI)<a class="anchor" aria-label="anchor" href="#example7"></a>
</h3>
<p>CCHS derived variables are recoded (harmonized) using the same method
as other CCHS <em>cchsflow</em> variables, with one additional
considerations.</p>
<p>Derived variables in CCHS are created from existing, original
variables that are transformed into a new variable. An example is body
mass index (BMI). Respondents are asked to report their height and
weight. BMI is then derived (calculated) using recoded variables for
height and weight.</p>
<p>Recoding <code>BMI</code> into a harmonized variable requires their
underlying initial variables (height and weight). This first step of
harmonizing underlying variables is completed for you, but you must have
the underlying variables in your dataset.</p>
<p>Using the BMI example illustrated in the <a href="derived_variables.html">derived variables</a> article,
<code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> is able to transform BMI across multiple
cycles provided that height (<code>HWTGHTM</code>) and weight
(<code>HWTGWTK</code>) are specified.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bmi2001</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HWTGHTM"</span>, <span class="st">"HWTGWTK"</span>, <span class="st">"HWTGBMI_der"</span><span class="op">)</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; NOTE for HWTGHTM: 2001 and 2003 CCHS use inches, values converted to meters to 3 decimal points</span></span>
<span><span class="co">#&gt; NOTE for HWTGHTM: 74+ inches converted to 76 inches</span></span>
<span><span class="co">#&gt; The variable HWTAGHT was recoded into HWTGHTM for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;    value_to From rows_recoded</span></span>
<span><span class="co">#&gt; 1     1.118    1            0</span></span>
<span><span class="co">#&gt; 2     1.143    2            0</span></span>
<span><span class="co">#&gt; 3     1.168    3            0</span></span>
<span><span class="co">#&gt; 4     1.194    4            0</span></span>
<span><span class="co">#&gt; 5     1.219    5            0</span></span>
<span><span class="co">#&gt; 6     1.245    6            0</span></span>
<span><span class="co">#&gt; 7      1.27    7            0</span></span>
<span><span class="co">#&gt; 8     1.295    8            0</span></span>
<span><span class="co">#&gt; 9     1.321    9            0</span></span>
<span><span class="co">#&gt; 10    1.346   10            0</span></span>
<span><span class="co">#&gt; 11    1.372   11            0</span></span>
<span><span class="co">#&gt; 12    1.397   12            0</span></span>
<span><span class="co">#&gt; 13    1.422   13            1</span></span>
<span><span class="co">#&gt; 14    1.448   14            0</span></span>
<span><span class="co">#&gt; 15    1.473   15            1</span></span>
<span><span class="co">#&gt; 16    1.499   16            2</span></span>
<span><span class="co">#&gt; 17    1.524   17            8</span></span>
<span><span class="co">#&gt; 18    1.549   18            7</span></span>
<span><span class="co">#&gt; 19    1.575   19           21</span></span>
<span><span class="co">#&gt; 20      1.6   20           12</span></span>
<span><span class="co">#&gt; 21    1.626   21           13</span></span>
<span><span class="co">#&gt; 22    1.651   22           19</span></span>
<span><span class="co">#&gt; 23    1.676   23           16</span></span>
<span><span class="co">#&gt; 24    1.702   24           21</span></span>
<span><span class="co">#&gt; 25    1.727   25           16</span></span>
<span><span class="co">#&gt; 26    1.753   26           11</span></span>
<span><span class="co">#&gt; 27    1.778   27           13</span></span>
<span><span class="co">#&gt; 28    1.803   28           14</span></span>
<span><span class="co">#&gt; 29    1.829   29           10</span></span>
<span><span class="co">#&gt; 30    1.854   30            8</span></span>
<span><span class="co">#&gt; 31     1.93   31            6</span></span>
<span><span class="co">#&gt; 32    NA::a   96            0</span></span>
<span><span class="co">#&gt; 33    NA::b   99            1</span></span>
<span><span class="co">#&gt; The variable HWTAGWTK was recoded into HWTGWTK for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to            From rows_recoded</span></span>
<span><span class="co">#&gt; 1     copy    [27.0,135.0]          199</span></span>
<span><span class="co">#&gt; 2    NA::a          999.96            0</span></span>
<span><span class="co">#&gt; 3    NA::b [999.97,999.99]            1</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">bmi2001</span><span class="op">)</span></span>
<span><span class="co">#&gt;   HWTGHTM HWTGWTK HWTGBMI_der</span></span>
<span><span class="co">#&gt; 1   1.422   56.25    27.81784</span></span>
<span><span class="co">#&gt; 2   1.549   51.75    21.56788</span></span>
<span><span class="co">#&gt; 3   1.803   78.75    24.22474</span></span>
<span><span class="co">#&gt; 4   1.575   60.75    24.48980</span></span>
<span><span class="co">#&gt; 5   1.727   63.00    21.12301</span></span>
<span><span class="co">#&gt; 6   1.829   91.80    27.44197</span></span>
<span></span>
<span><span class="va">bmi2012</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2012_p</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HWTGHTM"</span>, <span class="st">"HWTGWTK"</span>, <span class="st">"HWTGBMI_der"</span><span class="op">)</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; NOTE for HWTGHTM: Height is a reported in meters from 2005 CCHS onwards</span></span>
<span><span class="co">#&gt; The variable HWTGHTM was recoded into HWTGHTM for the database cchs2012_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to          From rows_recoded</span></span>
<span><span class="co">#&gt; 1     copy [0.914,2.134]          191</span></span>
<span><span class="co">#&gt; 2    NA::a         9.996            2</span></span>
<span><span class="co">#&gt; 3    NA::b [9.997,9.999]            7</span></span>
<span><span class="co">#&gt; The variable HWTGWTK was recoded into HWTGWTK for the database cchs2012_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to            From rows_recoded</span></span>
<span><span class="co">#&gt; 1     copy    [27.0,135.0]          189</span></span>
<span><span class="co">#&gt; 2    NA::a          999.96            0</span></span>
<span><span class="co">#&gt; 3    NA::b [999.97,999.99]           11</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">bmi2012</span><span class="op">)</span></span>
<span><span class="co">#&gt;     HWTGHTM HWTGWTK HWTGBMI_der</span></span>
<span><span class="co">#&gt; 195   1.829  108.00    32.28467</span></span>
<span><span class="co">#&gt; 196   1.524   70.20    30.22506</span></span>
<span><span class="co">#&gt; 197   1.803   84.00    25.83972</span></span>
<span><span class="co">#&gt; 198   1.575   63.00    25.39683</span></span>
<span><span class="co">#&gt; 199   1.829   85.50    25.55870</span></span>
<span><span class="co">#&gt; 200   1.702   74.25    25.63170</span></span>
<span></span>
<span><span class="va">combined_bmi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_rec_data.html">merge_rec_data</a></span><span class="op">(</span><span class="va">bmi2001</span>, <span class="va">bmi2012</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">combined_bmi</span><span class="op">)</span></span>
<span><span class="co">#&gt;   HWTGHTM HWTGWTK HWTGBMI_der</span></span>
<span><span class="co">#&gt; 1   1.422   56.25    27.81784</span></span>
<span><span class="co">#&gt; 2   1.549   51.75    21.56788</span></span>
<span><span class="co">#&gt; 3   1.803   78.75    24.22474</span></span>
<span><span class="co">#&gt; 4   1.575   60.75    24.48980</span></span>
<span><span class="co">#&gt; 5   1.727   63.00    21.12301</span></span>
<span><span class="co">#&gt; 6   1.829   91.80    27.44197</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">combined_bmi</span><span class="op">)</span></span>
<span><span class="co">#&gt;     HWTGHTM HWTGWTK HWTGBMI_der</span></span>
<span><span class="co">#&gt; 395   1.829  108.00    32.28467</span></span>
<span><span class="co">#&gt; 396   1.524   70.20    30.22506</span></span>
<span><span class="co">#&gt; 397   1.803   84.00    25.83972</span></span>
<span><span class="co">#&gt; 398   1.575   63.00    25.39683</span></span>
<span><span class="co">#&gt; 399   1.829   85.50    25.55870</span></span>
<span><span class="co">#&gt; 400   1.702   74.25    25.63170</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="example-8-distinguishing-which-cycle-data-is-from-in-combined-datasets">Example 8: Distinguishing which cycle data is from in combined
datasets<a class="anchor" aria-label="anchor" href="#example-8-distinguishing-which-cycle-data-is-from-in-combined-datasets"></a>
</h3>
<p>It can be important to know from which cycle data comes from after
combining all the cycles. <code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> provides the
option of appending a column that indicates from which dataset
respondents come from by setting the parameter
<code>attach_data_name</code> to be TRUE. Using the BMI example in <a href="#example7">Example 7</a>, <code><a href="../reference/rec_with_table.html">rec_with_table()</a></code> can
specify which dataset each respondent came from.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bmi2001</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2001_p</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HWTGHTM"</span>, <span class="st">"HWTGWTK"</span>, <span class="st">"HWTGBMI_der"</span><span class="op">)</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span>, attach_data_name <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; NOTE for HWTGHTM: 2001 and 2003 CCHS use inches, values converted to meters to 3 decimal points</span></span>
<span><span class="co">#&gt; NOTE for HWTGHTM: 74+ inches converted to 76 inches</span></span>
<span><span class="co">#&gt; The variable HWTAGHT was recoded into HWTGHTM for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;    value_to From rows_recoded</span></span>
<span><span class="co">#&gt; 1     1.118    1            0</span></span>
<span><span class="co">#&gt; 2     1.143    2            0</span></span>
<span><span class="co">#&gt; 3     1.168    3            0</span></span>
<span><span class="co">#&gt; 4     1.194    4            0</span></span>
<span><span class="co">#&gt; 5     1.219    5            0</span></span>
<span><span class="co">#&gt; 6     1.245    6            0</span></span>
<span><span class="co">#&gt; 7      1.27    7            0</span></span>
<span><span class="co">#&gt; 8     1.295    8            0</span></span>
<span><span class="co">#&gt; 9     1.321    9            0</span></span>
<span><span class="co">#&gt; 10    1.346   10            0</span></span>
<span><span class="co">#&gt; 11    1.372   11            0</span></span>
<span><span class="co">#&gt; 12    1.397   12            0</span></span>
<span><span class="co">#&gt; 13    1.422   13            1</span></span>
<span><span class="co">#&gt; 14    1.448   14            0</span></span>
<span><span class="co">#&gt; 15    1.473   15            1</span></span>
<span><span class="co">#&gt; 16    1.499   16            2</span></span>
<span><span class="co">#&gt; 17    1.524   17            8</span></span>
<span><span class="co">#&gt; 18    1.549   18            7</span></span>
<span><span class="co">#&gt; 19    1.575   19           21</span></span>
<span><span class="co">#&gt; 20      1.6   20           12</span></span>
<span><span class="co">#&gt; 21    1.626   21           13</span></span>
<span><span class="co">#&gt; 22    1.651   22           19</span></span>
<span><span class="co">#&gt; 23    1.676   23           16</span></span>
<span><span class="co">#&gt; 24    1.702   24           21</span></span>
<span><span class="co">#&gt; 25    1.727   25           16</span></span>
<span><span class="co">#&gt; 26    1.753   26           11</span></span>
<span><span class="co">#&gt; 27    1.778   27           13</span></span>
<span><span class="co">#&gt; 28    1.803   28           14</span></span>
<span><span class="co">#&gt; 29    1.829   29           10</span></span>
<span><span class="co">#&gt; 30    1.854   30            8</span></span>
<span><span class="co">#&gt; 31     1.93   31            6</span></span>
<span><span class="co">#&gt; 32    NA::a   96            0</span></span>
<span><span class="co">#&gt; 33    NA::b   99            1</span></span>
<span><span class="co">#&gt; The variable HWTAGWTK was recoded into HWTGWTK for the database cchs2001_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to            From rows_recoded</span></span>
<span><span class="co">#&gt; 1     copy    [27.0,135.0]          199</span></span>
<span><span class="co">#&gt; 2    NA::a          999.96            0</span></span>
<span><span class="co">#&gt; 3    NA::b [999.97,999.99]            1</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">bmi2001</span><span class="op">)</span></span>
<span><span class="co">#&gt;   HWTGHTM HWTGWTK HWTGBMI_der  data_name</span></span>
<span><span class="co">#&gt; 1   1.422   56.25    27.81784 cchs2001_p</span></span>
<span><span class="co">#&gt; 2   1.549   51.75    21.56788 cchs2001_p</span></span>
<span><span class="co">#&gt; 3   1.803   78.75    24.22474 cchs2001_p</span></span>
<span><span class="co">#&gt; 4   1.575   60.75    24.48980 cchs2001_p</span></span>
<span><span class="co">#&gt; 5   1.727   63.00    21.12301 cchs2001_p</span></span>
<span><span class="co">#&gt; 6   1.829   91.80    27.44197 cchs2001_p</span></span>
<span></span>
<span><span class="va">bmi2012</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/rec_with_table.html">rec_with_table</a></span><span class="op">(</span><span class="va">cchs2012_p</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"HWTGHTM"</span>, <span class="st">"HWTGWTK"</span>, <span class="st">"HWTGBMI_der"</span><span class="op">)</span>,</span>
<span>  log <span class="op">=</span> <span class="cn">TRUE</span>, attach_data_name <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; No variable_details detected.</span></span>
<span><span class="co">#&gt;               Loading cchsflow variable_details</span></span>
<span><span class="co">#&gt; Using the passed data variable name as database_name</span></span>
<span><span class="co">#&gt; NOTE for HWTGHTM: Height is a reported in meters from 2005 CCHS onwards</span></span>
<span><span class="co">#&gt; The variable HWTGHTM was recoded into HWTGHTM for the database cchs2012_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to          From rows_recoded</span></span>
<span><span class="co">#&gt; 1     copy [0.914,2.134]          191</span></span>
<span><span class="co">#&gt; 2    NA::a         9.996            2</span></span>
<span><span class="co">#&gt; 3    NA::b [9.997,9.999]            7</span></span>
<span><span class="co">#&gt; The variable HWTGWTK was recoded into HWTGWTK for the database cchs2012_p the following recodes were made:</span></span>
<span><span class="co">#&gt;   value_to            From rows_recoded</span></span>
<span><span class="co">#&gt; 1     copy    [27.0,135.0]          189</span></span>
<span><span class="co">#&gt; 2    NA::a          999.96            0</span></span>
<span><span class="co">#&gt; 3    NA::b [999.97,999.99]           11</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">bmi2012</span><span class="op">)</span></span>
<span><span class="co">#&gt;     HWTGHTM HWTGWTK HWTGBMI_der  data_name</span></span>
<span><span class="co">#&gt; 195   1.829  108.00    32.28467 cchs2012_p</span></span>
<span><span class="co">#&gt; 196   1.524   70.20    30.22506 cchs2012_p</span></span>
<span><span class="co">#&gt; 197   1.803   84.00    25.83972 cchs2012_p</span></span>
<span><span class="co">#&gt; 198   1.575   63.00    25.39683 cchs2012_p</span></span>
<span><span class="co">#&gt; 199   1.829   85.50    25.55870 cchs2012_p</span></span>
<span><span class="co">#&gt; 200   1.702   74.25    25.63170 cchs2012_p</span></span>
<span></span>
<span><span class="va">combined_bmi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_rec_data.html">merge_rec_data</a></span><span class="op">(</span><span class="va">bmi2001</span>, <span class="va">bmi2012</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">combined_bmi</span><span class="op">)</span></span>
<span><span class="co">#&gt;   HWTGHTM HWTGWTK HWTGBMI_der  data_name</span></span>
<span><span class="co">#&gt; 1   1.422   56.25    27.81784 cchs2001_p</span></span>
<span><span class="co">#&gt; 2   1.549   51.75    21.56788 cchs2001_p</span></span>
<span><span class="co">#&gt; 3   1.803   78.75    24.22474 cchs2001_p</span></span>
<span><span class="co">#&gt; 4   1.575   60.75    24.48980 cchs2001_p</span></span>
<span><span class="co">#&gt; 5   1.727   63.00    21.12301 cchs2001_p</span></span>
<span><span class="co">#&gt; 6   1.829   91.80    27.44197 cchs2001_p</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">combined_bmi</span><span class="op">)</span></span>
<span><span class="co">#&gt;     HWTGHTM HWTGWTK HWTGBMI_der  data_name</span></span>
<span><span class="co">#&gt; 395   1.829  108.00    32.28467 cchs2012_p</span></span>
<span><span class="co">#&gt; 396   1.524   70.20    30.22506 cchs2012_p</span></span>
<span><span class="co">#&gt; 397   1.803   84.00    25.83972 cchs2012_p</span></span>
<span><span class="co">#&gt; 398   1.575   63.00    25.39683 cchs2012_p</span></span>
<span><span class="co">#&gt; 399   1.829   85.50    25.55870 cchs2012_p</span></span>
<span><span class="co">#&gt; 400   1.702   74.25    25.63170 cchs2012_p</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Doug Manuel, Warsame Yusuf, Rostyslav Vyuha, Kitty Chen, Carol Bennett.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

      </footer>
</div>


<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({


    apiKey: 'a674c1edc7b44c4ee995ef4227708c57',
    indexName: 'cchsflow',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
